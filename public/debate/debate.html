<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>討論中</title>


    <script   src="https://code.jquery.com/jquery-2.2.2.js"   integrity="sha256-4/zUCqiq0kqxhZIyp4G0Gk+AOtCJsY1TA00k5ClsZYE="   crossorigin="anonymous"></script>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
<style>
    .remove{
        display:none;
    }

    #claimSample .row div{
        border:1px solid black;
        margin:2px;
    }
</style>

<style>
    .dmcc{
        width: 5px;
        height: 1260px;
        margin: 0 auto;
        position: absolute;
        top: 45px;
        left: 45px;
        background-color: #d7e4ed;
    }
    .dmcl{
        width: 70px;
        height: 5px;
        margin: 0 auto;
        position: absolute;
        top: 40px;
        left: 60px;
        background-color: #d7e4ed;
    }

    .dmcr{
        width: 60px;
        height: 5px;
        margin: 0 auto;
        position: absolute;
        top: 40px;
        left: -25px;
        background-color: #d7e4ed;
    }
    #l1{
        position: absolute;
        width:60px;
        height: 1840px;
        left:60px;
        top:45px;
    }

    #r1{
        position: absolute;
        width:60px;
        height: 1840px;
        left:-15px;
        top:45px;
    }

    #left{
        height:340px;
        overflow: auto;
    }

    #right{
        height:550px;
        overflow: auto;
    }

    #left,#right .alert{
        cursor: pointer;
    }
</style>


</head>

<body onload="startCanvas()">

<div class="container">
    <div class="row">
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">こんにちわ</a>
                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                        <li class="active"><a href="#">討論室<span class="sr-only">(current)</span></a></li>
                        <li><a href="#">テーマ一覧</a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">設定<span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="#">中断申請</a></li>
                                <li><a href="#"></a></li>
                                <li><a href="#">システム設定</a></li>
                                <li role="separator" class="divider"></li>
                                <li><a href="#">投降</a></li>
                                <li role="separator" class="divider"></li>
                                <li><a href="#">視聴者誘う</a></li>
                            </ul>
                        </li>
                    </ul>


                </div><!-- /.navbar-collapse -->
            </div><!-- /.container-fluid -->
        </nav>

    </div>

   <div class="row">

       <div class="jumbotron">
           <h2>テーマ:学生が成人したら経済的に独立するべきである</h2>
           <p>あなたの立場:Pro</p>
           <p>今の段階:相手に意見の分析</p>
       </div>
   </div>

    <div class="row">
        <div  class="col-md-6">
            <div id="left">
                    <div class="alert alert-info proState" role="alert">
                      <p>オリジナル意見</p>
                    <span class="alert-link">
                    私は学生さんが成人したら経済的に独立するべきだと思います.なぜかというと，コンビニやレストランなどいろいろなアルバイトが学生さんに提供されています．
                    そのようなアルバイトをすれば生活費を自分で稼げると思います．
                    </span>
                    </div>


                    <div class="alert alert-success conDState" role="alert">
                        <p>異議説明</p>
                    <span class="alert-link">
                    私はアルバイトで生活費を稼げるとは思わないです．たくさんの国ではアルバイトの時給は一つのハンバーガーさえ買えないし，その時給で生活費を支えたければ，社会人と同じように頑張らないといけないです，だから全世界を見れば，アルバイトで生活費を
                    稼ぐことなんて理想的すぎるのではないでしょうか
                    </span>
                    </div>

                    <div class="alert alert-success conState" role="alert">
                        <p>オリジナル意見</p>
                    <span class="alert-link">
                    またアルバイトすることは勉強に悪い影響を及ぼすことがあります．時間は無限ではないので，学生はアルバイトばかりしていると，勉強時間を確保できず，学業が疎かになる恐れがあります．
                    </span>
                    </div>

                    <div class="alert alert-info proDState" role="alert">
                        <p>異議説明</p>
                    <span class="alert-link">
                        私はアルバイトをすることは勉強に悪い影響はないと思う．勉強に使える時間が限られていれば，効率的に使えるように頑張る．効率が上がれば，学習効果もかえって上がる
                        </span>
                    </div>

                    <div class="alert alert-info proState" role="alert">
                        <p>オリジナル意見</p>
                    <span class="alert-link">
                        またアルバイトによっていろいろ勉強できる．それらは学校の勉強にも役に立つ．アルバイトで周りのものを見たり考えたりすることができる．アルバイトで得られる観察力，考え力のような力は学校での勉強にも役に立つのではないでしょうか．
                    </span>
                    </div>

                    </div>

            <div id="currentTitle">
                <div class="panel panel-default">
                    <div class="panel-heading">相手の意見</div>
                    <div class="panel-body">
                        私はアルバイトをすることは勉強に悪い影響はないと思う．勉強に使える時間が限られていれば，効率的に使えるように頑張る．効率が上がれば，学習効果もかえって上がる
                        \n
                        またアルバイトによっていろいろ勉強できる．それらは学校の勉強にも役に立つ．アルバイトで周りのものを見たり考えたりすることができる．アルバイトで得られる観察力，考え力のような力は学校での勉強にも役に立つのではないでしょうか．

                    </div>
                </div>
            </div>

        </div>

        <div id="right" class="col-md-6">
        <div >

            <div class="row">
                <div class="col-md-2">
                    <p style="font-size: 13px;">参加者Pro</p>
                    <div class="dmcc"></div>
                    <canvas id="l1" width="40" height="300"></canvas>
                </div>
                <div class="col-md-8"></div>
                <div class="col-md-2 text-right">
                    <p style="font-size: 13px;">参加者Con</p>
                    <div class="dmcc"></div>
                    <canvas id="r1" width="40" height="300"></canvas>
                </div>
            </div>

            <div class="row resultPro">
            <div class="row">

                <div class="col-md-2">
                    <div class="dmcl"></div>
                </div>

                <div style="margin-top: 20px;" class="col-md-8">

                        <div class="panel panel-default ">
                            <div class="panel-heading">オリジナル意見</div>
                            <div class="panel-body">
                                <div class="row">
                                    <div class="col-md-4">
                                        主張
                                    </div>
                                    <div class="col-md-8">
                                         学生さんが成人したら経済的に独立するべき
                                    </div>

                                </div>
                                <div class="row">
                                    <div class="col-md-4">
                                        論拠
                                    </div>
                                    <div class="col-md-8">
                                        アルバイト代で生活を支えられる
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4">
                                        根拠
                                    </div>
                                    <div class="col-md-8">
                                       コンビニやレストランなどいろいろアルバイトの機会を学生さんい提供されている
                                    </div>
                                </div>
                            </div>
                        </div>

                </div>

                <div class="col-md-2" >

                </div>

            </div>
            </div>

            <div class="row resultDCon">
            <div class="row">

                <div class="col-md-2">

                </div>

                <div style="margin-top: 20px;" class="col-md-8">

                    <div class="panel panel-default">

                        <div class="panel-heading">異議説明</div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-md-4">
                                    主張
                                </div>
                                <div class="col-md-8">
                                    その給料で生活を支えてられない
                                </div>

                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    論拠
                                </div>
                                <div class="col-md-8">
                                    その給料で生活費を稼ぐには社会人と同じように頑張らなければならず，学生の場合は無理です．
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    根拠
                                </div>
                                <div class="col-md-8">
                                    たくさんの国の時給では一つのハンバーガーさえ買えない
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="col-md-2" >
                    <div class="dmcr"></div>
                </div>

            </div>
            </div>

            <div class="row resultCon">
            <div class="row">

                <div class="col-md-2">

                </div>

                <div style="margin-top: 20px;" class="col-md-8">

                    <div class="panel panel-default ">

                        <div class="panel-heading">オリジナル意見</div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-md-4">
                                    主張
                                </div>
                                <div class="col-md-8">
                                    アルバイトは学業に悪い影響がある
                                </div>

                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    論拠
                                </div>
                                <div class="col-md-8">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                    勉強用の時間が確保できないと，学業が疎かになる恐れがある
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    根拠
                                </div>
                                <div class="col-md-8">
                                    あまりアルバイトをすると勉強用時間を確保できない
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="col-md-2" >
                    <div class="dmcr"></div>
                </div>

            </div>
            </div>


            <div class="row resultDPro">
            <div class="row">

                <div class="col-md-2">
                    <div class="dmcl"></div>
                </div>

                <div style="margin-top: 20px;" class="col-md-8">

                    <div class="panel panel-default ">

                        <div class="panel-heading">異議説明</div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-md-4">
                                    主張
                                </div>
                                <div class="col-md-8">
                                    勉強用の時間が減少しても，学業が疎かにならない
                                </div>

                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    論拠
                                </div>
                                <div class="col-md-8">
                                    大切にするから，時間の効率がよくなって，勉強の効果も上がる
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    根拠
                                </div>
                                <div class="col-md-8">
                                    勉強用の時間が少なければ，その時間を大切することになる
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="col-md-2" >

                </div>

            </div>
            </div>

            <div class="row resultPro">
            <div class="row">

                <div class="col-md-2">
                    <div class="dmcl"></div>
                </div>

                <div style="margin-top: 20px;" class="col-md-8">

                    <div class="panel panel-default">

                        <div class="panel-heading">オリジナル意見</div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-md-4">
                                    主張
                                </div>
                                <div class="col-md-8">
                                    アルバイトを通じて勉強もできる
                                </div>

                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    論拠
                                </div>
                                <div class="col-md-8">
                                    　アルバイトで得られた観察力，考え力のような力は学校での勉強も役たつのではないでしょうか
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    根拠
                                </div>
                                <div class="col-md-8">
                                    周りのものを見たり，考えたりすることができる
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="col-md-2" >

                </div>

            </div>
            </div>


        </div>
        </div>

    </div>

    <div class="row" id="proAnalysis">


    </div>

    <div class="row">

        <form class="form-group">
            <hr>

            <div class="claim">

                <div class="row">
                    <div class="col-sm-10">
                        <div class="input-group">
                            <span class="input-group-addon">主張: </span>
                            <input type="text" class="form-control claimTxt" placeholder="">
                            <span class="input-group-addon"><input value="1" type="checkbox"> 異議つけ</span>
                        </div>
                    </div>
                    <div class="col-sm-1 col-sm-offset-0 remove">
                        <button class="btn btn-default btn-xm glyphicon glyphicon-ban-circle" onclick="return _remove(this)"></button>
                    </div>
                </div>

                <div class="warrant">

                    <div class="row">
                        <div class="col-sm-offset-0 col-sm-1">
                            <button class="btn btn-default btn-xs addClaim" onclick="return addClaim(this)"><i class="fa fa-plus-square"></i> 主張</button>
                        </div>

                        <div class="col-sm-9 col-sm-offset-0">
                            <div class="input-group">
                                <span class="input-group-addon">論拠: </span>
                                <input type="text" class="form-control warrantTxt" placeholder="">
                                <span class="input-group-addon"><input value="1" type="checkbox"> 異議つけ</span>
                            </div>
                        </div>

                        <div class="col-sm-1 col-sm-offset-0 remove">
                            <button class="btn btn-default btn-xm glyphicon glyphicon-ban-circle" onclick="return _remove(this)"></button>
                        </div>

                    </div>


                    <div class="evidence">
                        <div class="row">
                            <div class="col-sm-offset-1 col-sm-1">
                                <button class="btn btn-default btn-xs addWarrant" onclick="return addWarrant(this)"><i class="fa fa-plus-square"></i> 論拠</button>
                            </div>
                            <div class="col-sm-8 col-sm-offset-0">
                                <div class="input-group">
                                    <span class="input-group-addon">根拠:</span>
                                    <input type="text" class="form-control evidenceTxt" placeholder="">
                                    <span class="input-group-addon"><input value="1" type="checkbox"> 異議つけ</span>
                                </div>
                            </div>
                            <div class="col-sm-1 col-sm-offset-0 remove">
                                <button class="btn btn-default btn-xm glyphicon glyphicon-ban-circle" onclick="return _remove(this)"></button>
                            </div>
                        </div>
                    </div><!-- end of evidence-->




                    <div class="row">
                        <div class="col-sm-offset-2 col-sm-1">
                            <button class="btn btn-default btn-xs addEvidence" onclick="return addEvidence(this)"><span class="fa fa-plus-square"></span> 根拠</button>
                        </div>
                    </div>

                </div><!-- end of warrant-->

            </div><!-- end of claim-->




            <div class="row">
                <div class="col-sm-offset-4 col-sm-1">
                    <button type="button" class="btn btn-default" onclick="return _submit()" style="width:250px;">登録</button>
                </div>
            </div>

        </form>

    </div>

</div>

</body>


<script>
    function startCanvas(){
      var l1 = document.getElementById('l1');
      var ctx = l1.getContext('2d');

      ctx.beginPath();
      ctx.moveTo(40, 105);
      ctx.lineTo(10, 105);
      ctx.lineTo(10, 140);
      ctx.lineTo(40, 140);
      ctx.stroke();

      var r1 = document.getElementById('r1');
      var ctx2 = r1.getContext('2d');

      ctx2.beginPath();
      ctx2.moveTo(0, 20);
      ctx2.lineTo(30, 20);
      ctx2.lineTo(30, 55);
      ctx2.lineTo(0, 55);
      ctx2.stroke();

    }


    $(".proState").click(function(){
        var i = $(".proState").index(this)
        var top = $(".resultPro")[i].offsetTop
        $("#right").animate({scrollTop:top},1000)
    })

    $(".conState").click(function(){
        var i = $(".conState").index(this)
        var top = $(".resultCon")[i].offsetTop
        $("#right").animate({scrollTop:top},1000)
    })

    $(".proDState").click(function(){
        var i = $(".proDState").index(this)
        var top = $(".resultDPro")[i].offsetTop
        $("#right").animate({scrollTop:top},1000)
    })

    $(".conDState").click(function(){
        var i = $(".conDState").index(this)
        var top = $(".resultDCon")[i].offsetTop
        $("#right").animate({scrollTop:top},1000)
    })


    function addEvidence(that){
        var _html = ($(that).parents(".warrant").find(".evidence:last").prop('outerHTML'));
        $(that).parents(".warrant").find(".evidence:last").after(_html);
        $(that).parents(".warrant").find(".evidence:last").after().find(".remove:hidden").show();
        $(that).parents(".warrant").find(".evidence:last").find(".addWarrant:first").remove();
        window.scrollTo(0,document.body.scrollHeight)
        return false;
    }

    function addWarrant(that){
        var _html = ($(that).parents(".claim").find(".warrant:last").prop('outerHTML'));
        $(that).parents(".claim").find(".warrant:last").after(_html);
        $(that).parents(".claim").find(".warrant:last").after().find(".remove").eq(0).show()
        $(that).parents(".claim").find(".warrant:last").after().find(".evidence").not(":eq(0)").remove()
        //$(that).parents(".claim").find(".warrant:last").find(".addClaim").remove();
        $(that).parents(".claim").find(".warrant:last").find(".addClaim").hide();
        $(that).hide();
        window.scrollTo(0,document.body.scrollHeight)
        return false;
    }

    function addClaim(that){
        var _html = ($(that).parents(".claim:last").prop('outerHTML'));
        $(that).parents(".claim:last").after(_html);
        $(".claim:last").find(".warrant").not(":last").remove();
        $(".claim:last").find(".warrant:last").find(".addClaim:hidden").show();
        $(".claim:last").find(".remove").eq(0).show();
        $(that).hide();
        window.scrollTo(0,document.body.scrollHeight)
        return false;
    }

    function _remove(that){
        var identity;
        if($(that).parents('.evidence').length>0){
            identity = 1
        }else if($(that).parents('.warrant').length>0){
            identity = 2
        }else{
            identity = 3
        }


        switch(identity){
            case 1:
                $(that).parents('.evidence').remove();
                break;
            case 2:
                $(that).parents('.claim').find(".warrant:eq(-2)").find('.addWarrant:hidden').show();
                $(that).parents('.warrant').remove();
                break;
            case 3:
                $(that).parents('.claim').remove();
                $(".claim:last").find(".addClaim:hidden").show();
                break;
            default:

                break;
        }

        return false;
    }


    function _submit(){

        var _obj = []
        //var dissentObj = [{"claimDissent":1,"warrant":[{"warrantDissent":1,"evidence":[{"evidenceDissent":1}]}]}]
        dissentObj = []

        var _claim = $(".claim");

        for(var i=0;i<_claim.length;i++){
            var __obj = {"claimTxt":"","warrant":[]}
            __obj.claimTxt = $(_claim[i]).find(".claimTxt").val();

            var __dissentObj = {"claimDissnet":"","warrant":[]}
            __dissentObj.claimDissent = $(_claim[i]).find(".claimTxt").next().find("input:checked").val()

            var _warrant = $(_claim[i]).find(".warrant");

            for(var j=0;j<_warrant.length;j++){
                var ___obj = {"warrantTxt":"","evidence":[]}
                ___obj.warrantTxt = $(_warrant[j]).find(".warrantTxt").val();

                var ___dissentObj = {"warrantDissent":"","evidenceDissent":[]}
                ___dissentObj.warrantDissent = $(_warrant[j]).find(".warrantTxt").next().find("input:checked").val()



                var _evidence = $(_warrant[j]).find(".evidence");

                for(var k=0;k<_evidence.length;k++){
                    ___obj.evidence.push({"evidenceTxt":$(_evidence[k]).find(".evidenceTxt").val()});
                    ___dissentObj.evidenceDissent.push($(_evidence[k]).find(".evidenceTxt").next().find("input:checked").val())

                }

                __obj.warrant.push(___obj);
                __dissentObj.warrant.push(___dissentObj)

            }

            _obj.push(__obj);
            dissentObj.push(__dissentObj)



            console.log(_obj);
            console.log("--------")
            console.log(dissentObj)
        }


        var _str = '';
        for(var i=0;i<_obj.length;i++){
            var claimDissentStr = parseInt(dissentObj[i]['claimDissent'])==1?"異議":"&nbsp;"


            _str += '<div id="claimSample">'+
                    '<div class="row">'+
                    '<div class="col-sm-1">'+
                    '主張'+
                    '</div>'+
                    '<div class="col-sm-8">'+ _obj[i].claimTxt+
                    '</div><div class="col-sm-2">'+claimDissentStr+'</div>'+
                    '</div>'

            for(var j=0;j<_obj[i]['warrant'].length;j++){
                var warrantDissentStr = parseInt(dissentObj[i]['warrant'][j]['warrantDissent'])==1?"異議":"&nbsp;"
                _str += '<div id="warrantSample">'+
                        '<div class="row">'+
                        '<div class="col-sm-1">'+
                        '論拠'+
                        '</div>'+
                        '<div class="col-sm-7">'+_obj[i]['warrant'][j]['warrantTxt']+
                        '</div><div class="col-sm-3">'+warrantDissentStr+'</div>'+
                        '</div>'


                for(var k=0;k<_obj[i]['warrant'][j]['evidence'].length;k++){
                    var evidenceDissentStr = parseInt(dissentObj[i]['warrant'][j]['evidenceDissent'][k])==1?"異議":"&nbsp;"
                    _str +=   '<div id="evidenceSample">'+
                            '<div class="row">'+
                            '<div class="col-sm-1">'+
                            '根拠'+
                            '</div>'+
                            '<div class="col-sm-6">'+_obj[i]['warrant'][j]['evidence'][k]['evidenceTxt']+
                            '</div><div class="col-sm-4">'+evidenceDissentStr+'</div>'+
                            '</div>'+
                            '</div><!-- evidenceSample -->'
                }

                _str += '</div><!-- warrantSample  -->'
            }

            _str += '</div><!-- claimSample -->'
        }


        $("#proAnalysis").html(_str);


        return false;
    }


</script>
</html>