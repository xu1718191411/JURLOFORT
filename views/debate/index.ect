<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>討論中</title>


    <script   src="https://code.jquery.com/jquery-2.2.2.js"></script>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>


    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="./style2.css">


</head>

<body>

<div class="container">
    <div class="row">
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">こんにちわ</a>
                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                        <li class="active"><a href="#">討論室<span class="sr-only">(current)</span></a></li>
                        <li><a href="#">テーマ一覧</a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">設定<span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="#">中断申請</a></li>
                                <li><a href="#"></a></li>
                                <li><a href="#">システム設定</a></li>
                                <li role="separator" class="divider"></li>
                                <li><a href="#">投降</a></li>
                                <li role="separator" class="divider"></li>
                                <li><a href="#">視聴者誘う</a></li>
                            </ul>
                        </li>
                    </ul>


                </div><!-- /.navbar-collapse -->
            </div><!-- /.container-fluid -->
        </nav>

    </div>

   <div class="row">

       <div class="jumbotron">
           <h2>テーマ:学生が成人したら経済的に独立するべきである</h2>


           <% if @userInformation.position==1 : %>
           <p>あなたの立場:<span id="tachiba" tachiba="1" class="label label-info" style="font-size: 20px;">肯定</span></p>
           <% else : %>
           <p>あなたの立場:<span id="tachiba" tachiba="2" class="label label-success" style="font-size: 20px;">否定</span></p>
           <% end %>



           <p>今の段階:相手に意見の分析</p>
           <p>肯定:<span id="proUsername"></span><span id="proUserStatus">入室</span></p>
           <p>否定:<span id="conUsername"></span><span id="conUserStatus">入室</span></p>

           <p><button id="prepare" class="btn-default">準備</button></p>
       </div>
   </div>

    <div class="row">
        <div  class="col-md-6">
            <div id="left">
<!--
                    <div class="alert alert-info proState" role="alert">
                      <p>オリジナル意見</p>
                    <span class="alert-link">
                    私は学生さんが成人したら経済的に独立するべきだと思います.なぜかというと，コンビニやレストランなどいろいろなアルバイトが学生さんに提供されています．
                    そのようなアルバイトをすれば生活費を自分で稼げると思います．
                    </span>
                    </div>

                    <div class="alert alert-success conDState" role="alert">
                        <p>異議説明</p>
                    <span class="alert-link">
                    私はアルバイトで生活費を稼げるとは思わないです．たくさんの国ではアルバイトの時給は一つのハンバーガーさえ買えないし，その時給で生活費を支えたければ，社会人と同じように頑張らないといけないです，だから全世界を見れば，アルバイトで生活費を
                    稼ぐことなんて理想的すぎるのではないでしょうか
                    </span>
                    </div>

                    <div class="alert alert-success conState" role="alert">
                        <p>オリジナル意見</p>
                    <span class="alert-link">
                    またアルバイトすることは勉強に悪い影響を及ぼすことがあります．時間は無限ではないので，学生はアルバイトばかりしていると，勉強時間を確保できず，学業が疎かになる恐れがあります．
                    </span>
                    </div>

                    <div class="alert alert-info proDState" role="alert">
                        <p>異議説明</p>
                    <span class="alert-link">
                        私はアルバイトをすることは勉強に悪い影響はないと思う．勉強に使える時間が限られていれば，効率的に使えるように頑張る．効率が上がれば，学習効果もかえって上がる
                        </span>
                    </div>

                    <div class="alert alert-info proState" role="alert">
                        <p>オリジナル意見</p>
                    <span class="alert-link">
                        またアルバイトによっていろいろ勉強できる．それらは学校の勉強にも役に立つ．アルバイトで周りのものを見たり考えたりすることができる．アルバイトで得られる観察力，考え力のような力は学校での勉強にも役に立つのではないでしょうか．
                    </span>
                    </div>
-->
            </div>

            <div id="currentTitle">
<!--
                <div class="panel panel-default">
                    <div class="panel-heading">相手の意見</div>
                    <div class="panel-body">
                        私はアルバイトをすることは勉強に悪い影響はないと思う．勉強に使える時間が限られていれば，効率的に使えるように頑張る．効率が上がれば，学習効果もかえって上がる
                        \n
                        またアルバイトによっていろいろ勉強できる．それらは学校の勉強にも役に立つ．アルバイトで周りのものを見たり考えたりすることができる．アルバイトで得られる観察力，考え力のような力は学校での勉強にも役に立つのではないでしょうか．

                    </div>
                </div>
-->
            </div>

        </div>

        <div id="right" class="col-md-6">
        <div>

            <div class="row">
                <div class="col-md-2">
                    <p style="font-size: 13px;">参加者Pro</p>
                    <div class="dmcc"></div>
                </div>
                <div class="col-md-8"></div>
                <div class="col-md-2 text-right">
                    <p style="font-size: 13px;">参加者Con</p>
                    <div class="dmcc"></div>
                </div>
            </div>


<!--
            <div class="row resultPro">
            <div class="row">

                <div class="col-md-2">
                    <div class="dmcl"></div>
                </div>

                <div style="margin-top: 20px;" class="col-md-8">

                        <div class="panel panel-info ">
                            <div class="panel-heading">オリジナル意見</div>
                            <div class="panel-body">
                                <div class="row">
                                    <div class="col-md-4">
                                        主張
                                    </div>
                                    <div class="col-md-8">
                                         学生さんが成人したら経済的に独立するべき
                                    </div>

                                </div>
                                <div class="row">
                                    <div class="col-md-1"></div>
                                    <div class="col-md-3">
                                        論拠
                                    </div>
                                    <div class="col-md-8">
                                        アルバイト代で生活を支えられる
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-2"></div>
                                    <div class="col-md-2">
                                        根拠
                                    </div>
                                    <div class="col-md-8">
                                       コンビニやレストランなどいろいろアルバイトの機会を学生さんい提供されている
                                    </div>
                                </div>
                            </div>
                        </div>

                </div>

                <div class="col-md-2" >

                </div>

            </div>
            </div>

            <div class="row resultDCon">
            <div class="row">

                <div class="col-md-2">

                </div>

                <div style="margin-top: 20px;" class="col-md-8">

                    <div class="panel panel-success">

                        <div class="panel-heading">異議説明</div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-md-4">
                                    主張
                                </div>
                                <div class="col-md-8">
                                    その給料で生活を支えてられない
                                </div>

                            </div>
                            <div class="row">
                                <div class="col-md-1"></div>
                                <div class="col-md-3">
                                    論拠
                                </div>
                                <div class="col-md-8">
                                    その給料で生活費を稼ぐには社会人と同じように頑張らなければならず，学生の場合は無理です．
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-2"></div>
                                <div class="col-md-2">
                                    根拠
                                </div>
                                <div class="col-md-8">
                                    たくさんの国の時給では一つのハンバーガーさえ買えない
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="col-md-2" >
                    <div class="dmcr"></div>
                </div>

            </div>
            </div>

            <div class="row resultCon">
            <div class="row">

                <div class="col-md-2">

                </div>

                <div style="margin-top: 20px;" class="col-md-8">

                    <div class="panel panel-success ">

                        <div class="panel-heading">オリジナル意見</div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-md-4">
                                    主張
                                </div>
                                <div class="col-md-8">
                                    アルバイトは学業に悪い影響がある
                                </div>

                            </div>
                            <div class="row">
                                <div class="col-md-1"></div>
                                <div class="col-md-3">
                                    論拠
                                </div>
                                <div class="col-md-8">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                    勉強用の時間が確保できないと，学業が疎かになる恐れがある
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-2"></div>
                                <div class="col-md-2">
                                    根拠
                                </div>
                                <div class="col-md-8">
                                    あまりアルバイトをすると勉強用時間を確保できない
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="col-md-2" >
                    <div class="dmcr"></div>
                </div>

            </div>
            </div>

-->


        </div>
        </div>

    </div>

    <div class="row" id="proAnalysis">


    </div>

    <div class="row">

        <form class="form-group" id="form1" style="display:none">
            <hr>
            <div id="g0">
                <button class="btn btn-success" type="button">
                    異議説明 <span class="badge">1</span>
                </button>
            </div>

            <div class="claim">

                <div class="row">
                    <div class="col-sm-10">
                        <div class="input-group">
                            <span class="input-group-addon">主張: </span>
                            <input type="text" class="form-control claimTxt" value="勉強用の時間が減少しても，学業が疎かにならない" placeholder="">
                            <span class="input-group-addon"><input value="1" type="checkbox"> 異議つけ</span>
                        </div>
                    </div>
                    <div class="col-sm-1 col-sm-offset-0 remove">
                        <button class="btn btn-default btn-xm glyphicon glyphicon-ban-circle" onclick="return _remove(this)"></button>
                    </div>
                </div>

                <div class="warrant">

                    <div class="row">
                        <div class="col-sm-offset-0 col-sm-1">
                            <button class="btn btn-default btn-xs addClaim" onclick="return addClaim(this)"><i class="fa fa-plus-square"></i> 主張</button>
                        </div>

                        <div class="col-sm-9 col-sm-offset-0">
                            <div class="input-group">
                                <span class="input-group-addon">論拠: </span>
                                <input type="text" class="form-control warrantTxt" value="大切にするから，時間の効率がよくなって，勉強の効果も上がる" placeholder="">
                                <span class="input-group-addon"><input value="1" type="checkbox"> 異議つけ</span>
                            </div>
                        </div>

                        <div class="col-sm-1 col-sm-offset-0 remove">
                            <button class="btn btn-default btn-xm glyphicon glyphicon-ban-circle" onclick="return _remove(this)"></button>
                        </div>

                    </div>


                    <div class="evidence">
                        <div class="row">
                            <div class="col-sm-offset-1 col-sm-1">
                                <button class="btn btn-default btn-xs addWarrant" onclick="return addWarrant(this)"><i class="fa fa-plus-square"></i> 論拠</button>
                            </div>
                            <div class="col-sm-8 col-sm-offset-0">
                                <div class="input-group">
                                    <span class="input-group-addon">根拠:</span>
                                    <input type="text" class="form-control evidenceTxt" value="勉強用の時間が少なければ，その時間を大切することになる" placeholder="">
                                    <span class="input-group-addon"><input value="1" type="checkbox"> 異議つけ</span>
                                </div>
                            </div>
                            <div class="col-sm-1 col-sm-offset-0 remove">
                                <button class="btn btn-default btn-xm glyphicon glyphicon-ban-circle" onclick="return _remove(this)"></button>
                            </div>
                        </div>
                    </div><!-- end of evidence-->




                    <div class="row">
                        <div class="col-sm-offset-2 col-sm-1">
                            <button class="btn btn-default btn-xs addEvidence" onclick="return addEvidence(this)"><span class="fa fa-plus-square"></span> 根拠</button>
                        </div>
                    </div>

                </div><!-- end of warrant-->

            </div><!-- end of claim-->

            <div id="c0">
            <button  class="btn btn-success" type="button">
                オリジナル意見 <span class="badge">1</span>
            </button>
            </div>
            <div class="claim">

                <div class="row">
                    <div class="col-sm-10">
                        <div class="input-group">
                            <span class="input-group-addon">主張: </span>
                            <input type="text" class="form-control claimTxt" value="アルバイトを通じて勉強もできる" placeholder="">
                            <span class="input-group-addon"><input value="1" type="checkbox"> 異議つけ</span>
                        </div>
                    </div>
                    <div class="col-sm-1 col-sm-offset-0 remove">
                        <button class="btn btn-default btn-xm glyphicon glyphicon-ban-circle" onclick="return _remove(this)"></button>
                    </div>
                </div>

                <div class="warrant">

                    <div class="row">
                        <div class="col-sm-offset-0 col-sm-1">
                            <button class="btn btn-default btn-xs addClaim" onclick="return addClaim(this)"><i class="fa fa-plus-square"></i> 主張</button>
                        </div>

                        <div class="col-sm-9 col-sm-offset-0">
                            <div class="input-group">
                                <span class="input-group-addon">論拠: </span>
                                <input type="text" class="form-control warrantTxt" value="アルバイトで得られた観察力，考え力のような力は学校での勉強も役たつのではないでしょうか" placeholder="">
                                <span class="input-group-addon"><input value="1" type="checkbox"> 異議つけ</span>
                            </div>
                        </div>

                        <div class="col-sm-1 col-sm-offset-0 remove">
                            <button class="btn btn-default btn-xm glyphicon glyphicon-ban-circle" onclick="return _remove(this)"></button>
                        </div>

                    </div>


                    <div class="evidence">
                        <div class="row">
                            <div class="col-sm-offset-1 col-sm-1">
                                <button class="btn btn-default btn-xs addWarrant" onclick="return addWarrant(this)"><i class="fa fa-plus-square"></i> 論拠</button>
                            </div>
                            <div class="col-sm-8 col-sm-offset-0">
                                <div class="input-group">
                                    <span class="input-group-addon">根拠:</span>
                                    <input type="text" class="form-control evidenceTxt" value="周りのものを見たり，考えたりすることができる" placeholder="">
                                    <span class="input-group-addon"><input value="1" type="checkbox"> 異議つけ</span>
                                </div>
                            </div>
                            <div class="col-sm-1 col-sm-offset-0 remove">
                                <button class="btn btn-default btn-xm glyphicon glyphicon-ban-circle" onclick="return _remove(this)"></button>
                            </div>
                        </div>
                    </div><!-- end of evidence-->




                    <div class="row">
                        <div class="col-sm-offset-2 col-sm-1">
                            <button class="btn btn-default btn-xs addEvidence" onclick="return addEvidence(this)"><span class="fa fa-plus-square"></span> 根拠</button>
                        </div>
                    </div>

                </div><!-- end of warrant-->

            </div><!-- end of claim-->
            <div class="row">
                <div class="col-sm-offset-4 col-sm-1">
                    <button type="button" class="btn btn-default" onclick="return _submit()" style="width:250px;">登録</button>
                </div>
            </div>

        </form>

    </div>

    <div class="row">

        <form id="form2" style="display:none">
            <div class="row" id="area">

            </div>
            <div class="row pull-right">
                <button type="submit" class="btn btn-default">Submit</button>
            </div>

        </form>

    </div>
    <br/>
    <div class="row" id="wait" style="display:none">
        <h2 class="alert alert-default text-center" role="alert">相手の確認をお待ちください</h2>
        <div class="cssload-loading">
            <div class="cssload-finger cssload-finger-1">
                <div class="cssload-finger-item">
                    <span></span><i></i>
                </div>
            </div>
            <div class="cssload-finger cssload-finger-2">
                <div class="cssload-finger-item">
                    <span></span><i></i>
                </div>
            </div>
            <div class="cssload-finger cssload-finger-3">
                <div class="cssload-finger-item">
                    <span></span><i></i>
                </div>
            </div>
            <div class="cssload-finger cssload-finger-4">
                <div class="cssload-finger-item">
                    <span></span><i></i>
                </div>
            </div>
            <div class="cssload-last-finger">
                <div class="cssload-last-finger-item"><i></i></div>
            </div>
        </div>

    </div>
</div>



<div class="row dissentStatement" style="display:none">
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">

                <a class="navbar-brand" href="#">異議説明:&nbsp;<span class="stateContent"></span></a>
            </div>
        </div><!-- /.container-fluid -->
    </nav>
    <textarea class="form-control" rows="3"></textarea>
</div>


<div class="row originalStatement" style="display:none">
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">

                <a class="navbar-brand" href="#">オリジナル意見</a>
            </div>
        </div><!-- /.container-fluid -->
    </nav>
    <textarea class="form-control" rows="3"></textarea>
</div>


<div id="copy" style="display:none">

    <div class="row resultDPro">
        <div class="row">

            <div class="col-md-2">
                <div class="dmcl"></div>
            </div>

            <div style="margin-top: 20px;" class="col-md-8">

                <div class="panel panel-info ">

                    <div class="panel-heading">異議説明</div>
                    <div class="panel-body">
                        <div class="resultDProA1">


                        </div>

                        <div class="resultDProA2" style="display:none">
                        <div class="row">
                            <div class="col-md-4">
                                主張
                            </div>
                            <div class="col-md-8">
                                勉強用の時間が減少しても，学業が疎かにならない
                            </div>

                        </div>
                        <div class="row">
                            <div class="col-md-1">
                            </div>
                            <div class="col-md-3">
                                論拠
                            </div>
                            <div class="col-md-8">
                                大切にするから，時間の効率がよくなって，勉強の効果も上がる
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-2">
                            </div>
                            <div class="col-md-2">
                                根拠
                            </div>
                            <div class="col-md-8">
                                勉強用の時間が少なければ，その時間を大切することになる
                            </div>
                        </div>
                        </div>


                    </div>
                </div>

            </div>

            <div class="col-md-2" >

            </div>

        </div>
    </div>

    <div class="row resultPro">
        <div class="row">

            <div class="col-md-2">
                <div class="dmcl"></div>
            </div>

            <div style="margin-top: 20px;" class="col-md-8">

                <div class="panel panel-info">

                    <div class="panel-heading">オリジナル意見</div>
                    <div class="panel-body">

                        <div class="resultProA1"></div>
                        <div class="resultProA2" style="display:none">
                        <div class="row">
                            <div class="col-md-4">
                                主張
                            </div>
                            <div class="col-md-8">
                                アルバイトを通じて勉強もできる
                            </div>

                        </div>
                        <div class="row">
                            <div class="col-md-1">
                            </div>
                            <div class="col-md-3">
                                論拠
                            </div>
                            <div class="col-md-8">
                                　アルバイトで得られた観察力，考え力のような力は学校での勉強も役たつのではないでしょうか
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-2">
                            </div>
                            <div class="col-md-2">
                                根拠
                            </div>
                            <div class="col-md-8">
                                周りのものを見たり，考えたりすることができる
                            </div>
                        </div>
                        </div>

                    </div>
                </div>

            </div>

            <div class="col-md-2" >

            </div>

        </div>
    </div>

</div>
</body>
<script src="/socket.io/socket.io.js"></script>

<script src="./global.js"></script>

<script>
var socket = io();



socket.on("enterRoom",function(msg){

    if(msg.loginInfo.position == 1){
        $("#proUsername").text(msg.loginInfo.username)
    }else{
        $("#conUsername").text(msg.loginInfo.username)
    }


})

socket.on("prepare",function(msg){
    console.log(msg.prepareInfo);





        if(msg.prepareInfo.position == 1){
            $("#proUserStatus").text("準備中")
        }else{
            $("#conUserStatus").text("準備中")
        }
})


socket.on("allPrepare",function(msg){
        var status = msg.status

        console.log("all prepared")
        console.log(msg)
        if(status == 0){


                    //pro 做陈述
                    if($("#tachiba").attr("tachiba") == 1){

                            showNextStep()

                    }

        }
})

</script>


<script>


socket.emit("enterRoom",{})


$("#prepare").click(function(){

    $(this).attr("disabled","disabled");

        $.ajax({
           type: "POST",
           url: "/debate/preparePost",
           data: {},
           success: function(res){
                var result = eval("("+res+")")
                if(result.error==0){
                    socket.emit("prepare",{})
                }
           }
         });

})

</script>
</html>