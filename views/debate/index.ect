<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>討論中</title>


<script   src="https://code.jquery.com/jquery-2.2.3.js"   integrity="sha256-laXWtGydpwqJ8JA+X9x2miwmaiKhn8tVmOVEigRNtP4="   crossorigin="anonymous"></script>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>


    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="./style2.css">

    <script src="/javascripts/sweetalert.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/stylesheets/sweetalert.css">

</head>

<body>

<div class="container">
    <% include 'debate/top.ect', { userInformation:@userInformation} %>

   <div class="row">

           <h2>テーマ:<%=@theme.theme%></h2>

            <div class="row">

            </div>

            <div class="row">



                  <div class="col-md-3">

                  <p>今の段階:<span id="nowStatus">相手に意見の分析</span></p>

                  </div>

                  <div class="col-md-3">

                  <p>ルール:5回終了.第<span id="numberOrder">0</span>回.あと<span id="leftNum">3</span>回</p>

                  </div>


                  <div class="col-md-2">
                               <% if @timeLimit == 1: %>
                               <p>制限時間<span id="leftTimeSeconds">30</span>秒</p>
                               <% else: %>
                               <p id="timeLimit" style="display:none">制限時間<span id="leftTimeSeconds">30</span>秒</p>
                               <% end %>
                   </div>

            </div>

            <div class="row">
                  <div class="col-md-3">

                   <p>肯定:<span id="proUsername"></span>

                             <span id="proUserStatus">
                              <% if @proPrepare==1 : %>
                              <%=@pro %>準備中
                             <% else : %>
                             <%=@pro %>入室
                             <% end %>
                             </span>
                   </p>

                   </div>

                   <div class="col-md-3">

                             <p>否定:<span id="conUsername"></span>

                             <span id="conUserStatus">
                             <% if @conPrepare==1 : %>
                             <%=@con %>準備中
                             <% else : %>
                             <%=@con %>入室
                             <% end %>

                             </span>
                             </p>
                   </div>


                     <div class="col-md-2">

                            <% if @userInformation.position==1 : %>
                            <p>あなたの立場:<span id="tachiba" tachiba="1" class="label label-info" style="font-size: 20px;">肯定</span></p>
                            <% else : %>
                            <p>あなたの立場:<span id="tachiba" tachiba="2" class="label label-success" style="font-size: 20px;">否定</span></p>
                            <% end %>

                     </div>

                     <div class="col-md-4">
                            <p><button id="prepare" class="btn-default btn-md">準備</button></p>
                     </div>


            </div>

       </div>

    <div class="row">

            <div class="alert alert-info" role="alert" id="kakusu">
             表示
            </div>

    </div>

    <div class="row" id="middle" style="display:none">
        <div  class="col-md-6">
            <div id="left">

                    <div class="top" style="display:none">
                    <div id="left_proState">
                    <div  class="alert alert-info proState" role="alert" >
                      <p>オリジナル意見</p>
                    <span class="alert-link">
                                xxxxxx
                    </span>
                    </div>
                    </div>

                    <div id="left_conDState">
                    <div class="alert alert-success conDState" role="alert">
                        <p>異議説明</p>
                    <span class="alert-link">
                                xxxxxx
                    </span>
                    </div>
                    </div>

                    <div  id="left_conState">
                    <div  class="alert alert-success conState" role="alert">
                        <p>オリジナル意見</p>
                    <span class="alert-link">
                                xxxxxx
                    </span>
                    </div>
                    </div>

                    <div id="left_proDState">
                    <div class="alert alert-info proDState" role="alert">
                        <p>異議説明</p>
                    <span class="alert-link">
                                xxxxxx
                    </span>
                    </div>
                    </div>

                    </div>

                    <div id="left_bottom" class="bottom">

                    </div>


                    <!--
                    <div class="alert alert-info proState" role="alert">
                        <p>オリジナル意見</p>
                    <span class="alert-link">
                        またアルバイトによっていろいろ勉強できる．それらは学校の勉強にも役に立つ．アルバイトで周りのものを見たり考えたりすることができる．アルバイトで得られる観察力，考え力のような力は学校での勉強にも役に立つのではないでしょうか．
                    </span>
                    </div>
                    -->

            </div>

            <div id="currentTitle">
<!--
                <div class="panel panel-default">
                    <div class="panel-heading">相手の意見</div>
                    <div class="panel-body">
                        私はアルバイトをすることは勉強に悪い影響はないと思う．勉強に使える時間が限られていれば，効率的に使えるように頑張る．効率が上がれば，学習効果もかえって上がる
                        \n
                        またアルバイトによっていろいろ勉強できる．それらは学校の勉強にも役に立つ．アルバイトで周りのものを見たり考えたりすることができる．アルバイトで得られる観察力，考え力のような力は学校での勉強にも役に立つのではないでしょうか．

                    </div>
                </div>
-->
            </div>

        </div>

        <div id="right" class="col-md-6">
        <div id="rightContainer">

            <div class="row">
                <div class="col-md-2">
                    <p style="font-size: 13px;">参加者Pro</p>
                    <div class="dmcc"></div>
                </div>
                <div class="col-md-8"></div>
                <div class="col-md-2 text-right">
                    <p style="font-size: 13px;">参加者Con</p>
                    <div class="dmcc"></div>
                </div>
            </div>


<!--
            <div class="row resultPro">
            <div class="row">

                <div class="col-md-2">
                    <div class="dmcl"></div>
                </div>

                <div style="margin-top: 20px;" class="col-md-8">

                        <div class="panel panel-info ">
                            <div class="panel-heading">オリジナル意見</div>
                            <div class="panel-body">
                                <div class="row">
                                    <div class="col-md-4">
                                        主張
                                    </div>
                                    <div class="col-md-8">
                                         学生さんが成人したら経済的に独立するべき
                                    </div>

                                </div>
                                <div class="row">
                                    <div class="col-md-1"></div>
                                    <div class="col-md-3">
                                        論拠
                                    </div>
                                    <div class="col-md-8">
                                        アルバイト代で生活を支えられる
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-2"></div>
                                    <div class="col-md-2">
                                        根拠
                                    </div>
                                    <div class="col-md-8">
                                       コンビニやレストランなどいろいろアルバイトの機会を学生さんい提供されている
                                    </div>
                                </div>
                            </div>
                        </div>

                </div>

                <div class="col-md-2" >

                </div>

            </div>
            </div>

            <div class="row resultDCon">
            <div class="row">

                <div class="col-md-2">

                </div>

                <div style="margin-top: 20px;" class="col-md-8">

                    <div class="panel panel-success">

                        <div class="panel-heading">異議説明</div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-md-4">
                                    主張
                                </div>
                                <div class="col-md-8">
                                    その給料で生活を支えてられない
                                </div>

                            </div>
                            <div class="row">
                                <div class="col-md-1"></div>
                                <div class="col-md-3">
                                    論拠
                                </div>
                                <div class="col-md-8">
                                    その給料で生活費を稼ぐには社会人と同じように頑張らなければならず，学生の場合は無理です．
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-2"></div>
                                <div class="col-md-2">
                                    根拠
                                </div>
                                <div class="col-md-8">
                                    たくさんの国の時給では一つのハンバーガーさえ買えない
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="col-md-2" >
                    <div class="dmcr"></div>
                </div>

            </div>
            </div>

            <div class="row resultCon">
            <div class="row">

                <div class="col-md-2">

                </div>

                <div style="margin-top: 20px;" class="col-md-8">

                    <div class="panel panel-success ">

                        <div class="panel-heading">オリジナル意見</div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-md-4">
                                    主張
                                </div>
                                <div class="col-md-8">
                                    アルバイトは学業に悪い影響がある
                                </div>

                            </div>
                            <div class="row">
                                <div class="col-md-1"></div>
                                <div class="col-md-3">
                                    論拠
                                </div>
                                <div class="col-md-8">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                    勉強用の時間が確保できないと，学業が疎かになる恐れがある
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-2"></div>
                                <div class="col-md-2">
                                    根拠
                                </div>
                                <div class="col-md-8">
                                    あまりアルバイトをすると勉強用時間を確保できない
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="col-md-2" >
                    <div class="dmcr"></div>
                </div>

            </div>
            </div>

-->


        </div>
        </div>

    </div>






 <div style="display:none">
    <div class="row" id="igisetsumeiTag" class="igisetsumeiTagTxt">異議説明分1分析結果</div>
    <div id="dClaimSample">
       <div class="row">
          <div class="col-sm-1">主張</div>
          <div class="col-sm-8 dClaimSampleTxt">ad</div>
          <div class="col-sm-2 igiMark">&nbsp;</div>
       </div>

       <!-- warrantSample  -->
    </div>

    <div id="dWarrantSample">
      <div class="row">
         <div class="col-sm-1">論拠</div>
         <div class="col-sm-7 dWarrantSampleTxt" >11111</div>
         <div class="col-sm-3 igiMark">&nbsp;</div>
      </div>
   </div>


    <div id="dEvidenceSample">
      <div class="row">
            <div class="col-sm-1">根拠</div>
            <div class="col-sm-6 dEvidenceSampleTxt">asd</div>
            <div class="col-sm-4 igiMark">&nbsp;</div>
      </div>
    </div>
    <!-- evidenceSample -->

    <!-- claimSample -->
    <div class="row" id="originalikenTag" class="originalikenTagTxt">オリジナル意見分析結果</div>
    <div id="claimSample">
       <div class="row">
          <div class="col-sm-1">主張</div>
          <div class="col-sm-8 claimSampleTxt">asd</div>
          <div class="col-sm-2 igiMark">&nbsp;</div>
       </div>
    </div>
    <!-- claimSample -->

    <div id="warrantSample">
              <div class="row">
                 <div class="col-sm-1">論拠</div>
                 <div class="col-sm-7 warrantSampleTxt">asd</div>
                 <div class="col-sm-3 igiMark">&nbsp;</div>
              </div>
    </div>
    <!-- warrantSample  -->

    <div id="evidenceSample">
                     <div class="row">
                        <div class="col-sm-1">根拠</div>
                        <div class="col-sm-6 evidenceSampleTxt">asd</div>
                        <div class="col-sm-4 igiMark">&nbsp;</div>
                     </div>
    </div>
    <!-- evidenceSample -->




    <div class="list-group" id="receiveStatementFromOpposite" >

    </div>

      <a href="#" class="list-group-item active receiveStatementFromOppositeIgi">
        <h4 class="list-group-item-heading ">異議説明</h4>
        <p class="list-group-item-text receiveStatementFromOppositeIgiTxt">...</p>
      </a>

      <a href="#" class="list-group-item receiveStatementFromOppositeIken">
          <h4 class="list-group-item-heading ">オリジナル意見</h4>
          <p class="list-group-item-text receiveStatementFromOppositeIkenTxt">...</p>
      </a>

 </div>

    <div class="row" id="proAnalysis" style="width:850px;margin:0 auto">


    </div>


<div id="bunsekiFeedBack" style="display:none">
    <div class="alert alert-success" role="alert" id="bunsekiFeedBackConfirm"> Well done! You successfully read this important alert message.</div>
    <div class="alert alert-warning" role="alert" id="bunsekiFeedBackRefuse"> Warning! Better check yourself, you're not looking too good.</div>
</div>

<div class="row" id="bunsekikekaTag" style="display:none">

     <div style="width:200px;margin:0 auto">
      <ul id="myTab" class="nav nav-tabs">
           <li class="active"><a href="#quotesConfirm" data-toggle="tab">認証</a></li>
           <li><a href="#quotesRefuse" data-toggle="tab">拒否</a></li>
      </ul>

     </div>

     <div id="myTabContent" class="tab-content">
     <div style="width:400px;margin:0 auto" class="tab-pane" id="quotesConfirm">
         <label for="disabledTextInput">コメント</label>
         <textarea class="form-control" rows="3">
         素晴らしい分析でした
         </textarea>

         <div style="width:200px;margin:0 auto">
                     <button type="button" class="btn btn-default btn-lg" onclick="dealWithAnalysisResult(1,this)">送信</button>
         </div>
     </div>


     <div style="width:400px;margin:0 auto" class="tab-pane" id="quotesRefuse">
         <label for="disabledTextInput" >拒否する理由</label>
         <select class="form-control" id="quotesRefuseOptions">
           <option value="1">意味があべこべに勘違いされました</option>
           <option value="2">意味が一部分が勘違いされました</option>
           <option value="3">徹底的に分析していません</option>
         </select>
         <textarea class="form-control" rows="3" id="quotesRefuseOptionsTxt">

         </textarea>

         <div style="width:200px;margin:0 auto">
                     <button type="button" class="btn btn-default btn-lg" onclick="dealWithAnalysisResult(2,this)">送信</button>
         </div>
     </div>


    </div>



 </div>


    <div class="row">

        <form class="form-group" id="form1" style="display:none">
            <hr>

            <div class="top" style="display:none">

            <div class="proDB">
                <div>
                <button class="btn btn-info" type="button">
                    異議説明 <span class="badge"></span>
                </button>
                </div>
            </div>

            <div class="proB">
                <div>
                <button  class="btn btn-info" type="button">
                    オリジナル意見 <span class="badge"></span>
                </button>
                </div>
            </div>

            <div class="conDB">
                <div>
                <button class="btn btn-success" type="button">
                    異議説明 <span class="badge"></span>
                </button>
                </div>
            </div>

            <div class="conB">
                <div>
                <button  class="btn btn-success" type="button">
                    オリジナル意見 <span class="badge"></span>
                </button>
                </div>
            </div>

            <div class="claim">

                            <div class="row">
                                <div class="col-sm-10">
                                    <div class="input-group">
                                        <span class="input-group-addon">主張: </span>
                                        <input type="text" class="form-control claimTxt" value="" placeholder="">
                                        <span class="input-group-addon"><input value="1" type="checkbox"> 異議つけ</span>
                                    </div>
                                </div>
                                <div class="col-sm-1 col-sm-offset-0 remove">
                                    <button class="btn btn-default btn-xm glyphicon glyphicon-ban-circle" onclick="return _remove(this)"></button>
                                </div>
                            </div>

                            <div class="warrant">

                                <div class="row">
                                    <div class="col-sm-offset-0 col-sm-1">
                                        <button class="btn btn-default btn-xs addClaim" onclick="return addClaim(this)"><i class="fa fa-plus-square"></i> 主張</button>
                                    </div>

                                    <div class="col-sm-9 col-sm-offset-0">
                                        <div class="input-group">
                                            <span class="input-group-addon">論拠: </span>
                                            <input type="text" class="form-control warrantTxt" value="" placeholder="">
                                            <span class="input-group-addon"><input value="1" type="checkbox"> 異議つけ</span>
                                        </div>
                                    </div>

                                    <div class="col-sm-1 col-sm-offset-0 remove">
                                        <button class="btn btn-default btn-xm glyphicon glyphicon-ban-circle" onclick="return _remove(this)"></button>
                                    </div>

                                </div>


                                <div class="evidence">
                                    <div class="row">
                                        <div class="col-sm-offset-1 col-sm-1">
                                            <button class="btn btn-default btn-xs addWarrant" onclick="return addWarrant(this)"><i class="fa fa-plus-square"></i> 論拠</button>
                                        </div>
                                        <div class="col-sm-8 col-sm-offset-0">
                                            <div class="input-group">
                                                <span class="input-group-addon">根拠:</span>
                                                <input type="text" class="form-control evidenceTxt" value="" placeholder="">
                                                <span class="input-group-addon"><input value="1" type="checkbox"> 異議つけ</span>
                                            </div>
                                        </div>
                                        <div class="col-sm-1 col-sm-offset-0 remove">
                                            <button class="btn btn-default btn-xm glyphicon glyphicon-ban-circle" onclick="return _remove(this)"></button>
                                        </div>
                                    </div>
                                </div><!-- end of evidence-->




                                <div class="row">
                                    <div class="col-sm-offset-2 col-sm-1">
                                        <button class="btn btn-default btn-xs addEvidence" onclick="return addEvidence(this)"><span class="fa fa-plus-square"></span> 根拠</button>
                                    </div>
                                </div>

                            </div><!-- end of warrant-->

            </div><!-- end of claim-->



            </div>

            <div class="down">


            </div>

            <div class="row">
                <div class="col-sm-offset-4 col-sm-1">
                    <button type="button" class="btn btn-default" onclick="return _submit()" style="width:250px;">登録</button>
                </div>
            </div>

        </form>

    </div>

    <div class="row">

        <form id="form2" style="display:none">
            <div class="row" id="area">

            </div>
            <div class="row pull-right">
                <button type="submit" onclick="return __submit()" class="btn btn-default">Submit</button>
            </div>

        </form>

    </div>
    <br/>
    <div class="row" id="wait" style="display:none">
        <h2 class="alert alert-default text-center" role="alert" id="waitTxt">相手の確認をお待ちください</h2>
        <div class="cssload-loading">
            <div class="cssload-finger cssload-finger-1">
                <div class="cssload-finger-item">
                    <span></span><i></i>
                </div>
            </div>
            <div class="cssload-finger cssload-finger-2">
                <div class="cssload-finger-item">
                    <span></span><i></i>
                </div>
            </div>
            <div class="cssload-finger cssload-finger-3">
                <div class="cssload-finger-item">
                    <span></span><i></i>
                </div>
            </div>
            <div class="cssload-finger cssload-finger-4">
                <div class="cssload-finger-item">
                    <span></span><i></i>
                </div>
            </div>
            <div class="cssload-last-finger">
                <div class="cssload-last-finger-item"><i></i></div>
            </div>
        </div>

    </div>
</div>



<div class="row dissentStatement" style="display:none">
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">

                <a class="navbar-brand" href="#">異議説明:&nbsp;<span class="stateContent"></span></a>
            </div>
        </div><!-- /.container-fluid -->
    </nav>
    <textarea class="form-control" rows="3"></textarea>
</div>


<div class="row originalStatement" style="display:none">
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">

                <a class="navbar-brand" href="#">オリジナル意見</a>
            </div>
        </div><!-- /.container-fluid -->
    </nav>
    <textarea class="form-control" rows="3"></textarea>
</div>


<div id="copy" style="display:none">

    <div class="row resultVPro">
        <div class="row">

            <div class="col-md-2">
                <div class="dmcl"></div>
            </div>

            <div style="margin-top: 20px;" class="col-md-8">

                <div class="panel panel-info ">

                    <div class="panel-heading">肯定側が分析の時間を違反しました</div>
                    <div class="panel-body">

                    </div>
                </div>

            </div>

            <div class="col-md-2" >

            </div>

        </div>
    </div>


    <div class="row resultVCon">
        <div class="row">

            <div class="col-md-2">
                <div class="dmcl"></div>
            </div>

            <div style="margin-top: 20px;" class="col-md-8">

                <div class="panel panel-success ">

                    <div class="panel-heading">反対側が分析の時間を違反しました</div>
                    <div class="panel-body">

                    </div>
                </div>

            </div>

            <div class="col-md-2" >

            </div>

        </div>
    </div>

    <div class="row resultDPro">
        <div class="row">

            <div class="col-md-2">
                <div class="dmcl"></div>
            </div>

            <div style="margin-top: 20px;" class="col-md-8">

                <div class="panel panel-info ">

                    <div class="panel-heading">異議説明</div>
                    <div class="panel-body">
                        <div class="resultDProA1">


                        </div>

                        <div class="resultDProA2" style="display:none">
                        <div class="row">
                            <div class="col-md-4">
                                主張
                            </div>
                            <div class="col-md-8">
                                勉強用の時間が減少しても，学業が疎かにならない
                            </div>

                        </div>
                        <div class="row">
                            <div class="col-md-1">
                            </div>
                            <div class="col-md-3">
                                論拠
                            </div>
                            <div class="col-md-8">
                                大切にするから，時間の効率がよくなって，勉強の効果も上がる
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-2">
                            </div>
                            <div class="col-md-2">
                                根拠
                            </div>
                            <div class="col-md-8">
                                勉強用の時間が少なければ，その時間を大切することになる
                            </div>
                        </div>
                        </div>


                    </div>
                </div>

            </div>

            <div class="col-md-2" >

            </div>

        </div>
    </div>

    <div class="row resultPro">
        <div class="row">

            <div class="col-md-2">
                <div class="dmcl"></div>
            </div>

            <div style="margin-top: 20px;" class="col-md-8">

                <div class="panel panel-info">

                    <div class="panel-heading">オリジナル意見</div>
                    <div class="panel-body">

                        <div class="resultProA1"></div>
                        <div class="resultProA2" style="display:none">
                        <div class="row">
                            <div class="col-md-4">
                                主張
                            </div>
                            <div class="col-md-8">
                                アルバイトを通じて勉強もできる
                            </div>

                        </div>
                        <div class="row">
                            <div class="col-md-1">
                            </div>
                            <div class="col-md-3">
                                論拠
                            </div>
                            <div class="col-md-8">
                                　アルバイトで得られた観察力，考え力のような力は学校での勉強も役たつのではないでしょうか
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-2">
                            </div>
                            <div class="col-md-2">
                                根拠
                            </div>
                            <div class="col-md-8">
                                周りのものを見たり，考えたりすることができる
                            </div>
                        </div>
                        </div>

                    </div>
                </div>

            </div>

            <div class="col-md-2" >

            </div>

        </div>
    </div>


    <div class="row resultCon">
            <div class="row">

                <div class="col-md-2">
                    <div class="dmcl"></div>
                </div>

                <div style="margin-top: 20px;" class="col-md-8">

                    <div class="panel panel-success">

                        <div class="panel-heading">オリジナル意見</div>
                        <div class="panel-body">

                            <div class="resultConA1"></div>
                            <div class="resultConA2" style="display:none">
                            <div class="row">
                                <div class="col-md-4">
                                    主張
                                </div>
                                <div class="col-md-8">
                                    アルバイトを通じて勉強もできる
                                </div>

                            </div>
                            <div class="row">
                                <div class="col-md-1">
                                </div>
                                <div class="col-md-3">
                                    論拠
                                </div>
                                <div class="col-md-8">
                                    　アルバイトで得られた観察力，考え力のような力は学校での勉強も役たつのではないでしょうか
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-2">
                                </div>
                                <div class="col-md-2">
                                    根拠
                                </div>
                                <div class="col-md-8">
                                    周りのものを見たり，考えたりすることができる
                                </div>
                            </div>
                            </div>

                        </div>
                    </div>

                </div>

                <div class="col-md-2" >

                </div>

            </div>
        </div>

        <div class="row resultDCon">
                    <div class="row">

                        <div class="col-md-2">
                            <div class="dmcl"></div>
                        </div>

                        <div style="margin-top: 20px;" class="col-md-8">

                            <div class="panel panel-success">

                                <div class="panel-heading">意義説明</div>
                             <div class="panel-body">

                                    <div class="resultDConA1"></div>
                                    <div class="resultDConA2" style="display:none">
                                    <div class="row">
                                        <div class="col-md-4">
                                            主張
                                        </div>
                                        <div class="col-md-8">
                                            アルバイトを通じて勉強もできる
                                        </div>

                                    </div>
                                    <div class="row">
                                        <div class="col-md-1">
                                        </div>
                                        <div class="col-md-3">
                                            論拠
                                        </div>
                                        <div class="col-md-8">
                                            　アルバイトで得られた観察力，考え力のような力は学校での勉強も役たつのではないでしょうか
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-2">
                                        </div>
                                        <div class="col-md-2">
                                            根拠
                                        </div>
                                        <div class="col-md-8">
                                            周りのものを見たり，考えたりすることができる
                                        </div>
                                    </div>
                                    </div>

                                </div>
                            </div>

                        </div>

                        <div class="col-md-2" >

                        </div>

                    </div>
                </div>

</div>
</body>
<script src="/socket.io/socket.io.js"></script>


<script>
var socket = io(window.location.host + "/debate");

socket.on("enterRoom",function(msg){
        // 0 pro 做陈述
        // 1 con 做分析
        // 2 con 做陈述
        // 3 pro 做分析

    window.status = parseInt(msg.status)

    if(parseInt(msg.setting) != 1){
            $('#systemSettingController').modal('show')
    }

    if(parseInt(msg.timeLimit) == 1){
            $("#timeLimit").show()
    }

    window.timeLimit = msg.timeLimit

    if(msg.loginInfo.position == 1){
        $("#proUsername").text(msg.loginInfo.username)
    }else{
        $("#conUsername").text(msg.loginInfo.username)
    }
})

socket.on("prepare",function(msg){
    console.log(msg.prepareInfo);

        if(msg.prepareInfo.position == 1){
            $("#proUserStatus").text("準備中")
        }else{
            $("#conUserStatus").text("準備中")
        }
})

//开始倒计时
function startTimeCount(){
    // myTimer 全局变量
    myTimer = setInterval(function(){
        var leftTimeSeconds =  parseInt($("#leftTimeSeconds").text()) - 1

        //如果时间到了的话
        if(leftTimeSeconds == 0){
                //执行时间违反函数
                timeLimitViolate()
                //初始化倒计时
                initialTimeCount()
                return false;
        }

        $("#leftTimeSeconds").text(leftTimeSeconds)
    },1000)
}

function stopTimeCount(){
    if(myTimer){
        clearInterval(myTimer)
    }

}

//初始化倒计时函数
function initialTimeCount(){
        if(myTimer){
                clearInterval(myTimer)
                $("#leftTimeSeconds").text(30)
        }

}

//时间违反函数
function timeLimitViolate(){
    var position = parseInt($("#tachiba").attr("tachiba"))

    switch(parseInt(window.status)){
        case 0:
            position==1?socket.emit("timeLimitViolate",{}):"";
        break;
        case 1:
            position==2?socket.emit("timeLimitViolate",{}):"";
        break;
        case 2:
            position==2?socket.emit("timeLimitViolate",{}):"";
        break;
        case 3:
             position==1?socket.emit("timeLimitViolate",{}):"";
        break;
    }

}


socket.on("allPrepare",function(msg){
        var status = msg.status
        window.status = parseInt(status);


        $("#proUserStatus").text("討論中")
        $("#conUserStatus").text("討論中")
        $("#prepare").remove()

        if(parseInt(window.timeLimit) == 1){

                setTimeout(function(){
                    startTimeCount()
                },2000)
        }


        if(status == 0){
                $("#nowStatus").text("肯定側意見を述べる")
                    //pro 做陈述
                    if($("#tachiba").attr("tachiba") == 1){
                            showNextStep()
                    }
        }


        //还剩几轮结束
        $("#leftNum").text(5)
})

socket.on("receiveStatement",function(msg){

    // 0 pro 做陈述
    // 1 con 做分析
    // 2 con 做陈述
    // 3 pro 做分析

//submitContentArr

    if(parseInt(window.timeLimit) == 1){

            //重新规划制限時間
            initialTimeCount()
            //制限時間スタート
            setTimeout(function(){
                startTimeCount()
            },2000)
    }


    var str = $("#receiveStatementFromOpposite").prop("outerHTML")
    $(str).attr("id","_receiveStatementFromOpposite")
    $("#proAnalysis").append(str)

    window.status = msg.status


    if(window.status == 1){
        //剩下几轮的显示
        $("#leftNum").text(parseInt($("#leftNum").text())>0?parseInt($("#leftNum").text())-1:0)
        $("#numberOrder").text(msg.numberOrder)

         // 0 pro 做陈述
        var sampleProState = $($("#left_proState").html()).attr("id","proState"+msg.submitContentArr[msg.submitContentArr.length-1].uuid);

        //先在左上角放入statement
        $("#left_bottom").append(sampleProState)

        $("#proState"+msg.submitContentArr[msg.submitContentArr.length-1].uuid).find(".alert-link").eq(0).text(msg.submitContentArr[msg.submitContentArr.length-1].content)
                //然后在statement前面依次放入異議説明
        $("#receiveStatementFromOppositeIken").find("#receiveStatementFromOppositeIkenTxt").text(msg.submitContentArr[msg.submitContentArr.length-1].content)
        var str = $("#receiveStatementFromOppositeIken").prop("outerHTML")
        $(str).attr("id","_receiveStatementFromOppositeIken")
        $("_receiveStatementFromOpposite").append(str)

                if(msg.submitContentArr.length>1){
                        for(var i=0;i<msg.submitContentArr.length-1;i++){
                                var sampleProDState = $($("#left_proDState").html()).attr("id","proDState"+msg.submitContentArr[i].uuid);
                                //$("#left_bottom").find(".proState").eq(-1).before(sampleProDState)
                                $("#proState"+msg.submitContentArr[msg.submitContentArr.length-1].uuid).before(sampleProDState)
                                //$("#left_bottom").find(".proDState").eq(-1).find(".alert-link").eq(0).text(msg.submitContentArr[i].content)
                                $("#proDState"+msg.submitContentArr[i].uuid).find(".alert-link").eq(0).text(msg.submitContentArr[i].content)
                        }
                }
    }else{
        // 2 con 做陈述
        var sampleConState = $($("#left_conState").html()).attr("id","conState"+msg.submitContentArr[msg.submitContentArr.length-1].uuid);

        //先在左上角放入statement
        $("#left_bottom").append(sampleConState)

        $("#conState"+msg.submitContentArr[msg.submitContentArr.length-1].uuid).find(".alert-link").eq(0).text(msg.submitContentArr[msg.submitContentArr.length-1].content)

        if(msg.submitContentArr.length>1){
                for(var i=0;i<msg.submitContentArr.length-1;i++){
                        var sampleConDState = $($("#left_conDState").html()).attr("id","conState"+msg.submitContentArr[i].uuid);
                        //$("#left_bottom").find(".conState").eq(-1).before(sampleConDState)
                        $("#conState"+msg.submitContentArr[msg.submitContentArr.length-1].uuid).before(sampleConDState)
                        //$("#left_bottom").find(".conDState").eq(-1).find(".alert-link").eq(0).text(msg.submitContentArr[i].content)
                        $("#conState"+msg.submitContentArr[i].uuid).find(".alert-link").eq(0).text(msg.submitContentArr[i].content)
                }
        }
    }

})




socket.on("DoAnalysis",function(msg){


    // 0 pro 做陈述
    // 1 con 做分析
    // 2 con 做陈述
    // 3 pro 做分析


    window.status = msg.status
    boundaryN = msg.submitContentArr.length>1?msg.submitContentArr.length-1:0

    var tachiba = $("#tachiba").attr("tachiba")


    // status=1
            // tachiba=1
                        //pro自己做完陈述,pro自己这边显示等待con分析

            // tachiba=2
                        //pro那边传来陈述,con这边根据陈述的内容结构(original 1个 意義説明 n个)作出分析输入框架的挂载


    // status=3
            // tachiba=1
                        //con那边传来陈述,pro这边根据陈述的内容结构(original 1个 意義説明 n个)作出分析输入框架的挂载

            // tachiba=2
                        //con自己做完陈述,con自己这边显示等待pro分析


    if(window.status==1){

            if(tachiba==1){
                                $("#wait").find("h2").eq(0).text("否定側の分析をお待ちください")
                                $("#wait").show()
            }else{
                                generateStatementInput(msg)
                                $("#wait").hide()
            }

    }else{


           if(tachiba==1){
                               generateStatementInput(msg)
                               $("#wait").hide()
           }else{
                                $("#wait").find("h2").eq(0).text("肯定側の分析をお待ちください")
                                $("#wait").show()
           }
    }


    $(".claimTxt,.warrantTxt,.evidenceTxt").val("");

    //显示对方传来的消息


})


function generateStatementInput(msg){

    $("#form1").find(".down").eq(0).html("")

    if(msg.submitContentArr.length>1){


            //说明对方还有意義説明
                for(var i=0;i<msg.submitContentArr.length-1;i++){
                   //绑带告诉你现在是第几个意義説明
                   if(window.status==3){
                            var obj = $("#form1").find(".top").eq(0).find(".conDB").eq(0).children("div").eq(0)
                   }else{
                            var obj = $("#form1").find(".top").eq(0).find(".proDB").eq(0).children("div").eq(0)
                   }


                    //先编号
                    obj.attr("id","g"+i)

                    obj.find(".badge").eq(0).text(i+1)
                    $("#form1").find(".down").eq(0).append(obj.prop('outerHTML'))

                    //再把编号里的id删掉，不然会有重复
                    obj.removeAttr("id")

                    //对每一个意義説明挂一个分析模型
                    var obj = $("#form1").find(".top").eq(0).find(".claim").eq(0)
                    $("#form1").find(".down").eq(0).append(obj.prop('outerHTML'))

                }


                    //绑带告诉你现在是original陈述

                    if(window.status == 1){
                            var obj = $("#form1").find(".top").eq(0).find(".proB").eq(0).children("div").eq(0)
                    }else{
                            var obj = $("#form1").find(".top").eq(0).find(".conB").eq(0).children("div").eq(0)
                    }

                    obj.attr("id","c0")
                    $("#form1").find(".down").eq(0).append(obj.prop('outerHTML'))

                    obj.removeAttr("id")
                    //对每一个original陈述挂一个分析模型
                    var obj = $("#form1").find(".top").eq(0).find(".claim").eq(0)
                    $("#form1").find(".down").eq(0).append(obj.prop('outerHTML'))


        }else{

            //这是一个全局变量
            //boundaryN代表.claim的前多少位是異議説明,这里的boundaryN为0,因为只有originalstatment没有意義説明
            //说明对方只有original陈述

                //绑带告诉你现在是original陈述
                    if(window.status == 1){
                        var obj = $("#form1").find(".top").eq(0).find(".proB").eq(0).children("div").eq(0)
                    }else{
                        var obj = $("#form1").find(".top").eq(0).find(".conB").eq(0).children("div").eq(0)
                    }

                    obj.attr("id","c0")
                    $("#form1").find(".down").eq(0).append(obj.prop('outerHTML'))
                    obj.removeAttr("id")
                    //对每一个original陈述挂一个分析模型
                    var obj = $("#form1").find(".top").eq(0).find(".claim").eq(0)
                    $("#form1").find(".down").eq(0).append(obj.prop('outerHTML'))

        }


        $("#form1").show()
}

socket.on("receiveAnalysis",function(msg){
    _obj = msg._obj
    dissentObj = msg.dissentObj

    //先清空
    $("#proAnalysis").html("")

    for(var i=0;i<_obj.length;i++){
        if(i<boundaryN){
            var str = $("#igisetsumeiTag").prop('outerHTML')
            var str = $(str).attr("id","igisetsumeiTag"+(i+1))
            $(str).text("異議説明"+(i+1));
        }else{
            $($("#originalikenTag").prop('outerHTML')).find(".originalikenTagTxt").eq(0).text("オリジナル意見");
            var str = $($("#originalikenTag").prop('outerHTML'))
        }
        $("#proAnalysis").append(str)


        var str = $("#dClaimSample").prop("outerHTML")
        var str = $(str).attr("id","dClaimSample"+_obj[i].uuid)
        if(parseInt(dissentObj[i]['claimDissent'])==1){
             $(str).find(".igiMark").eq(0).text("異議")
        }
        $(str).find(".dClaimSampleTxt").eq(0).text(_obj[i].claimTxt)



        $("#proAnalysis").append(str)

        for(var j=0;j<_obj[i]['warrant'].length;j++){
                var str = $("#dWarrantSample").prop("outerHTML")
                var str = $(str).attr("id","dWarrantSample"+_obj[i]['warrant'][j].uuid)
                $(str).find(".dWarrantSampleTxt").eq(0).text(_obj[i]['warrant'][j]['warrantTxt'])
                if(parseInt(dissentObj[i]['warrant'][j]['warrantDissent'])==1){
                    $(str).find(".igiMark").eq(0).text("異議")
                }


                $("#dClaimSample"+_obj[i].uuid).append(str)


                for(var k=0;k<_obj[i]['warrant'][j]['evidence'].length;k++){
                    var str = $("#dEvidenceSample").prop("outerHTML")
                    var str = $(str).attr("id","dEvidenceSample"+_obj[i]['warrant'][j]['evidence'][k].uuid)
                    $(str).find(".dEvidenceSampleTxt").eq(0).text(_obj[i]['warrant'][j]['evidence'][k].evidenceTxt)
                    if(parseInt(dissentObj[i]['warrant'][j]['evidenceDissent'][k])==1){
                        $(str).find(".igiMark").eq(0).text("異議")
                    }
                    $("#dWarrantSample"+_obj[i]['warrant'][j].uuid).append(str)
                }
        }

    }



    if((window.status == 1 && $("#tachiba").attr("tachiba")==1) || (window.status == 3 && $("#tachiba").attr("tachiba") == 2)){
        $("#bunsekikekaTag").show()
        $("#quotesConfirm").addClass("active")
    }

    //现在处于等待确认阶段，停止倒计时

    if(parseInt(window.timeLimit) == 1){
        initialTimeCount()
    }



    if(window.status == 1){

    //如果这是con做分析的后发送给各方的结果的话

        if($("#tachiba").attr("tachiba") == 2){

            //如果是con -->右上角显示 上方显示结果 等待pro确认 之后显示statement文本输入框

            $("#waitTxt").text("肯定側の確認をお待ちください")
            $("#wait").show()

        }else{
            //如果是pro -->右上角显示 上方显示结果 等待自己确认后 显示等待con statement

            $("#waitTxt").text("結果を確認してください")
            $("#wait").show()

            $("#wait").show()
        }
    }

    if(window.status == 3){

        //如果这是pro做分析后发送给各方的结果的话



         if($("#tachiba").attr("tachiba") == 2){

            //如果是con -->右上角显示 上方显示结果 等待自己确认后 显示等待pro statement
            //$("#wait").find("h2").eq(0).text("結果を確認してください")
            $("#waitTxt").text("結果を確認してください")
            $("#wait").show()

            $("#wait").show()

         }else{
            //如果是pro -->右上角显示 上方显示结果 等待对方确认后 之后显示statement文本输入框
            //$("#wait").find("h2").eq(0).text("否定側の確認をお待ちください")
            $("#waitTxt").text("否定側の確認をお待ちください")
            $("#wait").show()

         }

    }

    $("#form1").hide()
    window.status = msg.status
    return false;

})

socket.on("disposal",function(msg){
    var position = parseInt($("#tachiba").attr("tachiba"))
    var status = parseInt(msg.status)

    //debateStatus status
    // 0 pro 做陈述
    // 1 con 做分析
    // 2 con 做陈述
    // 3 pro 做分析


    switch(status){
        case 0:
            position==1?swal("時間が切れてしましました"):swal("相手時間違反でした")
            position==1?socket.emit("makeStatement",{violate:1, submitContentArr: [ { content: 'この主張の時間が違反でした' } ] }):"";
            //隐藏陈述文本输入框
            $("#form2").hide()
        break;
        case 1:
            position==2?swal("あなたが主張分析の時間が切れてしましました"):swal("相手が主張分析の相手時間違反でした");$("#wait").hide()
            position==2?socket.emit("makeAnalysis",{violate:1}):"";
            $("#form1").hide()
        break;
        case 2:
            position==2?swal("時間が切れてしましました"):swal("相手時間違反でした")
            position==2?socket.emit("makeStatement",{violate:1, submitContentArr: [ { content: 'この主張の時間が違反でした' } ] }):"";
            //隐藏陈述文本输入框
            $("#form2").hide()
        break;
        case 3:
            position==1?swal("あなたが主張分析の時間が切れてしましました"):swal("相手が主張分析の相手時間違反でした");$("#wait").hide()
            position==1?socket.emit("makeAnalysis",{violate:1}):"";
            $("#form1").hide()
        break;
    }

})

socket.on("systemSettingFinish",function(msg){

    if(parseInt(msg.timeLimit) == 1){
        $("#timeLimit").show()
    }
    $('#systemSettingController').modal('hide')
})

//Conからただ主張する
socket.on("restartFromCon",function(msg){
//清除之前分析时提交的质疑
dissentObj = []
window.status = msg.status
var position = parseInt($("#tachiba").attr("tachiba"))

if(position == 2){
    showNextStep();
}

if(msg.preStatus == 0){
    addViolateMessageToLeftTop(1);
}else if(msg.preStatus == 1){
    addViolateMessageToRightTop(2)
}else{

}



if(parseInt(window.timeLimit) == 1){

        //重新规划制限時間
        initialTimeCount()
        //制限時間スタート
        setTimeout(function(){
            startTimeCount()
        },2000)
}



})

//Proからただ主張する
socket.on("restartFromPro",function(msg){

//清除之前分析时提交的质疑
dissentObj = []
window.status = msg.status
var position = parseInt($("#tachiba").attr("tachiba"))

if(position == 1){
    showNextStep();
}

if(msg.preStatus == 2){
    addViolateMessageToLeftTop(2);
}else if(msg.preStatus == 3){
    addViolateMessageToRightTop(1);
}else{

}

if(parseInt(window.timeLimit) == 1){
        //重新规划制限時間
        initialTimeCount()
        //制限時間スタート
        setTimeout(function(){
            startTimeCount()
        },2000)
}


})

socket.on("refused",function(msg){


})

socket.on("confirmCompleted",function(msg){
    _obj = msg._obj
    dissentObj = msg.dissentObj
    window.status = msg.status

    if(window.status == 2){
        if(parseInt($("#tachiba").attr("tachiba")) == 2){
                addResultToRightMapBox(msg.fenduanArr)
                showNextStep();

                    if(parseInt(window.timeLimit) == 1){
                            initialTimeCount()
                            //制限時間スタート
                            setTimeout(function(){
                                startTimeCount()
                            },2000)
                    }
        }

        if(parseInt($("#tachiba").attr("tachiba")) == 1){
                addResultToRightMapBox(msg.fenduanArr)

                    //制限時間スタート
                    if(parseInt(window.timeLimit) == 1){
                            initialTimeCount()
                            setTimeout(function(){
                                startTimeCount()
                            },2000)
                    }
                  //$("#wait").find("h2").eq(0).text("否定側の意見述べまた意義説明をおまちください")
                   $("#waitTxt").text("否定側の意見述べまた意義説明をおまちください")
        }

    }


    if(window.status == 0){
        if(parseInt($("#tachiba").attr("tachiba")) == 2){
                addResultToRightMapBox(msg.fenduanArr)
                if(msg.numberOrder ==5){
                    return finishDebate()
                }

                    if(parseInt(window.timeLimit) == 1){
                        initialTimeCount()
                        //制限時間スタート
                        setTimeout(function(){
                            startTimeCount()
                        },2000)
                    }

                    //$("#wait").find("h2").eq(0).text("肯定側の意見述べまた意義説明をおまちください")
                    $("#waitTxt").text("肯定側の意見述べまた意義説明をおまちください")
        }

        if(parseInt($("#tachiba").attr("tachiba")) == 1){
                addResultToRightMapBox(msg.fenduanArr)
                if(msg.numberOrder ==5){
                    return finishDebate()
                }
                showNextStep();

                if(parseInt(window.timeLimit) == 1){
                 initialTimeCount()
                 //制限時間スタート
                 setTimeout(function(){
                 startTimeCount()
                 },2000)
                }

        }

    }

})



function finishDebate(){
                    swal("討論終了");
                    stopTimeCount()
                    $("#proAnalysis").html("討論終了")
                    $("#wait").hide();
                    return false;
}
function addViolateMessageToLeftTop(tachiba){
     if(tachiba == 1){
             // 0 pro 做陈述
            var sampleProState = $("#left").find(".top").eq(0).find(".proState").eq(0).prop('outerHTML');
            //先在左上角放入異議説明的说明文字
            $("#left").find(".bottom").eq(0).append(sampleProState)
            $("#left").find(".bottom").eq(0).find(".proState").eq(-1).find(".alert-link").eq(0).text("肯定側が時間を違反しました")
        }else{
            // 2 con 做陈述
            var sampleConState = $("#left").find(".top").eq(0).find(".conState").eq(0).prop('outerHTML');
            $("#left").find(".bottom").eq(0).append(sampleConState)
            $("#left").find(".bottom").eq(0).find(".conState").eq(-1).find(".alert-link").eq(0).text("否定側が時間を違反しました")
        }
}


function addViolateMessageToRightTop(tachiba){
    if(tachiba == 1){
        $($("#right").find("#rightContainer")[0]).append($($("#copy").find(".resultVPro")[0]).prop("outerHTML"))
    }else{
        $($("#right").find("#rightContainer")[0]).append($($("#copy").find(".resultVCon")[0]).prop("outerHTML"))
    }
}


</script>


<script>

socket.emit("enterRoom",{})

$("#prepare").click(function(){

    $(this).attr("disabled","disabled");

        $.ajax({
           type: "POST",
           url: "/debate/preparePost",
           data: {},
           success: function(res){
                var result = eval("("+res+")")
                if(result.error==0){
                    socket.emit("prepare",{})
                }
           }
         });
})

$("#kakusu").click(function(){

    $(this).text(function(i, text){
          return text === "隠す" ? "表示" : "隠す";
      })

    $("#middle").toggle()
})


function __submit(){

    if(parseInt(window.timeLimit)==1){
        stopTimeCount()
    }

    $("#proAnalysis").html("")

    var obj = $("#form2").find("#area").find("textarea");

    var submitContentArr = []

    for(var i=0;i<obj.length;i++){
           submitContentArr.push({content:obj.eq(i).val()})
    }

    socket.emit("makeStatement",{submitContentArr:submitContentArr})

    //隐藏陈述文本输入框
    $("#form2").hide()

    return false;
}


function dealWithAnalysisResult(n,that){
    //$(that).attr("disabled","disabled")
    //$(that).siblings("button").attr("disabled","disabled")
    if(n<=1){
        //認証
        socket.emit("dealWithAnalysisResult",{res:1})
    }else{
        //拒否

        var quotesRefuseOptionsTxt = $("#quotesRefuseOptionsTxt").val()
        var quotesRefuseOptions = $("#quotesRefuseOptions").val()

        //socket.emit("dealWithAnalysisResult",{res:2,{opt:{quotesRefuseOptionsTxt:quotesRefuseOptionsTxt,quotesRefuseOptions:quotesRefuseOptions}}})
    }

    $("#bunsekikekaTag").hide()
}


function confirmDebateSetting(){
    var timeSeigen = $(".seigen:checked").val()
    socket.emit("systemSetting",{timeLimite:timeSeigen})
}




</script>

<script src="./global.js"></script>

</html>